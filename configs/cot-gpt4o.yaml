source:
  - name: ClassEval
    path: FudanSELab/ClassEval
    split: test

dataset:
  - name: target
    primary_key: id
    fields:
      - name: id
        source: ClassEval
        type: ClassEval
        key: task_id
      - name: skeleton
        source: ClassEval
        type: ClassEval
        key: skeleton

graph:
  entry_point: initialize

  edges:
    - pair: [initialize, __end__]
      type: always

  nodes:
    - name: initialize
      chains:
        - name: plan
          dependencies: []
          input_keys: [skeleton]
          type: cot
          kwargs:
            llm:
              max_retries: 1000000
              max_tokens: 2048
              model: gpt-4o
              platform: azure
              temperature: 0
              top_p: 1
            parsers:
              - type: code_block
            prompt:
              type: chat
              kwargs:
                body_template_paths: ["templates/default/plan"]
        - name: code
          dependencies: [plan]
          input_keys: [skeleton, plan]
          type: cot
          kwargs:
            llm:
              max_retries: 1000000
              max_tokens: 2048
              model: gpt-4o
              platform: azure
              temperature: 0
              top_p: 1
            parsers:
              - type: code_block
            prompt:
              type: chat
              kwargs:
                body_template_paths: ["templates/default/code"]
